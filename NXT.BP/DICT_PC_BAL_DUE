SUBROUTINE DICT_PC_BAL_DUE(RESULT)
*
* ROUTINE IS USED BY THE I-TYPE DICTIONARY ITEM PC_BAL_DUE
* FOR FILE PO_CHILD
* DETERMINES BALANCE DUE
* BY ACCESSING THE RECIEVER RECORD FOR THE PO CHILD ITEM
*
* DICT PO_CHILD PC_BAL_DUE
* 01: I
* 02: SUBR("DICT_PC_BAL_DUE")
* 03:
* 04: BALANCE DUE
* 05: 8R
* 06: S

*
$INCLUDE NXT.INCLUDES RECEIPTS.H
$INCLUDE NXT.INCLUDES PO_CHILD.H
*
RESULT = @RECORD<PC_ORD_QTY>
RECEIVED.QTY = 0
OPEN "RECEIPTS" TO RECEIPTS.FB THEN
    RECEIPT_ID = @ID
    READ RECEIPTS.REC FROM RECEIPTS.FB, RECEIPT_ID THEN
     RCVR.COUNT = DCOUNT(RECEIPTS.REC<RC_PACKSLIPS>,@VM)
      FOR I = 1 TO RCVR.COUNT
        RECEIVED.QTY = RECEIVED.QTY + RECEIPTS.REC<RC_QTY1,I> + RECEIPTS.REC<RC_QTY2,I> +  RECEIPTS.REC<RC_QTY3,I> + RECEIPTS.REC<RC_WO_QTY,I>
      NEXT I
    END
    RESULT = RESULT - RECEIVED.QTY
    IF RESULT < 0 THEN RESULT = 0
END ELSE
  RESULT = -1
END
RETURN
END
